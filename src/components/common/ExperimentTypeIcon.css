/**
 * 实验类型图标的CSS样式
 * 优化图标渲染，防止闪烁
 */

/* 确保图标容器有固定尺寸和位置 */
.experiment-type-icon {
  /* 使用GPU加速渲染，减少闪烁 */
  transform: translateZ(0);
  backface-visibility: hidden;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  
  /* 确保固定尺寸 */
  display: inline-flex !important;
  align-items: center;
  justify-content: center;
  flex-shrink: 0 !important;
  flex-grow: 0 !important;
  
  /* 防止字体大小变化引起的闪烁 */
  font-size: inherit;
  line-height: 1;
  
  /* 确保元素不会被挤压 */
  min-width: 1em;
  min-height: 1em;
  
  /* 确保位置固定 */
  position: relative;
  
  /* 确保文本不会引起布局变化 */
  white-space: nowrap;
  
  /* 添加平滑过渡，使任何变化更自然 */
  transition: all 0.2s ease-in-out;
  
  /* 防止文本选择 */
  user-select: none;
}

/* 预加载字体以避免首次渲染时的闪烁 */
@font-face {
  font-family: 'react-icons';
  src: url('data:font/woff;base64,') format('woff');
  font-display: block; /* 确保字体在加载前不显示 */
}

/* 实验类型特定颜色 */
.experiment-type-icon[data-type="gpio"] {
  color: #28a745;
}

.experiment-type-icon[data-type="button"],
.experiment-type-icon[data-type="input"] {
  color: #6610f2;
}

.experiment-type-icon[data-type="sensor"] {
  color: #fd7e14;
}

.experiment-type-icon[data-type="audio"] {
  color: #20c997;
}

.experiment-type-icon[data-type="wireless"],
.experiment-type-icon[data-type="wifi"] {
  color: #17a2b8;
}

.experiment-type-icon[data-type="timer"] {
  color: #6c757d;
}

.experiment-type-icon[data-type="display"],
.experiment-type-icon[data-type="lcd"] {
  color: #e83e8c;
}

.experiment-type-icon[data-type="analog"],
.experiment-type-icon[data-type="adc"] {
  color: #007bff;
}

.experiment-type-icon[data-type="pwm"] {
  color: #dc3545;
}

.experiment-type-icon[data-type="motor"],
.experiment-type-icon[data-type="actuator"] {
  color: #6f42c1;
}

/* 当图标在徽章内部时的特殊处理 */
.badge .experiment-type-icon {
  margin-right: 0.25rem;
  /* 确保在徽章内部也有固定尺寸 */
  width: 1em !important;
  height: 1em !important;
  font-size: 0.85em !important;
}

/* 确保加载中的图标有相同的尺寸，避免布局变化 */
.experiment-type-icon-loading {
  width: 1em;
  height: 1em;
  display: inline-block;
  opacity: 0.75;
}

/* 调整卡片内图标的显示 */
.card .experiment-type-icon {
  margin-right: 0.35rem;
}

/* 防止在加载时的图标闪烁 */
[data-loading="true"] .experiment-type-icon {
  visibility: hidden;
  opacity: 0;
}

[data-loading="false"] .experiment-type-icon {
  visibility: visible;
  opacity: 1;
}

/* 预加载所有可能的图标字体，避免字体加载引起的闪烁 */
body::after {
  content: '';
  display: block;
  height: 0;
  width: 0;
  overflow: hidden;
  visibility: hidden;
  position: absolute;
  font-family: 'Font Awesome 5 Free', 'Bootstrap Icons', 'Material Design Icons';
}

/* 确保徽章内的图标位置稳定 */
.experiment-type-badge,
.experiment-status-badge {
  display: inline-flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  height: 22px !important; /* 固定高度非常重要 */
  min-height: 22px !important;
  max-height: 22px !important;
  padding: 0 0.65em !important;
  box-sizing: border-box !important;
}

/* 确保徽章内的文本不会引起位置变化 */
.experiment-type-badge > span,
.experiment-status-badge > span {
  display: inline-block !important;
  line-height: 1 !important;
  white-space: nowrap !important;
}

/* 为特定类型的图标预设颜色，避免颜色变化引起的闪烁 */
.experiment-type-icon[data-type="gpio"] {
  color: #4caf50 !important;
}

.experiment-type-icon[data-type="serial"],
.experiment-type-icon[data-type="uart"] {
  color: #2196f3 !important;
}

.experiment-type-icon[data-type="timer"] {
  color: #ff9800 !important;
}

.experiment-type-icon[data-type="adc"],
.experiment-type-icon[data-type="analog"] {
  color: #f44336 !important;
}

.experiment-type-icon[data-type="dac"],
.experiment-type-icon[data-type="audio"] {
  color: #9c27b0 !important;
}

.experiment-type-icon[data-type="dma"],
.experiment-type-icon[data-type="memory"] {
  color: #795548 !important;
}

.experiment-type-icon[data-type="advanced"],
.experiment-type-icon[data-type="application"] {
  color: #e91e63 !important;
} 